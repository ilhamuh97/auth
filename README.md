# Auth Project

This project is an authentication system with a **Node.js + TypeScript backend** and a **React frontend**, deployed using **Docker** and **Nginx proxy**.

The frontend is served via **Nginx**, which also proxies `/api` requests to the backend to avoid CORS issues.

## **Project Description**

The Auth project is designed to understand and demonstrate how authentication works in a web application. It covers key authentication features including:

* User login and logout flows
* Handling cookies for session management
* Forgot password and reset password functionality
* Email verification using Mailtrap

It serves as a practical example for learning full authentication cycles in modern web applications.

---

## **Project Structure**

```
Auth/
│
├─ auth-backend/      # Node.js + TypeScript backend
│   ├─ src/           # TypeScript source files
│   ├─ dist/          # Compiled JavaScript (generated by tsc)
│   ├─ package.json
│   ├─ tsconfig.json
│   └─ Dockerfile
│
├─ auth-frontend/     # React frontend (built with Vite)
│   ├─ src/           # React source files
│   ├─ dist/          # Production build output
│   ├─ package.json
│   ├─ Dockerfile
│   └─ nginx.conf     # Nginx configuration for serving frontend & proxy
│
└─ docker-compose.yml
```

---

## **Requirements**

* Docker >= 20
* Docker Compose >= 1.29

> Node.js and npm are **not required** on the host machine, because Docker handles everything.

---

## **Setup & Running**

1. **Clone the repository**

```bash
git clone <your-repo-url>
cd Auth
```

2. **Create `.env` files**

* Backend: `auth-backend/.env`
* Frontend (optional): `auth-frontend/.env`

Example backend `.env`:

```
PORT=5000
MONGO_URI=<your-mongodb-uri>
JWT_SECRET=<your-secret>
```

---

3. **Build and run containers**

```bash
docker-compose build --no-cache
docker-compose up -d
```

* Backend container: **internal port 5000**
* Frontend container: **host port 3000** → visit `http://localhost:3000`

---

4. **Frontend API calls**

* All API requests should use **relative paths** starting with `/api`:

```ts
// Example with axios
axios.post("/api/auth/login", data);

// Example with fetch
fetch("/api/auth/login", { method: "POST", body: JSON.stringify(data) });
```

* Nginx automatically proxies `/api` requests to the backend.
* No CORS configuration is needed.

---

## **Stopping the project**

```bash
docker-compose down
```

This stops and removes the containers.

---

## **Rebuilding the project**

If you make changes to the frontend or backend:

```bash
docker-compose build --no-cache
docker-compose up -d
```

---

## **Notes**

* Backend uses **TypeScript**; compiled output is in `dist/`.
* Frontend is built with **Vite**; production output is in `dist/`.
* Nginx serves the frontend and proxies all `/api` requests to the backend.
* MongoDB is assumed to be an external service (e.g., MongoDB Atlas).
* Mailtrap is used for testing email verification flows.

---

## **Access URLs**

* Frontend: `http://localhost:3000`
* Backend API (internal Docker network): `/api/...`

  * Example: `/api/auth/login`
  * Accessing backend directly via `localhost:5000` is **not needed** and may cause CORS issues.

---

## **License**

MIT License
